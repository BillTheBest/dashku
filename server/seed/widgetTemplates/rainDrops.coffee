module.exports =
  name: "D3 Raindrops"
  html: '<!-- This is where yout html goes, but it can remain blank for now -->'
  css:  "/* your widget's CSS goes here */\nbody {\n  background: #222;\n}\n\ncircle {\n  fill: none;\n  stroke-width: 1.5px;\n}"
  script: "// The widget's html as a jQuery object\nvar widget = this.widget;\nvar widgetId = widget.parent().attr('data-id');\n\n// This runs when the widget is loaded\nthis.on('load', function(data){\n  head.js('/javascripts/d3.v2.min.js')\n  head.ready(function(){\n    // Here is where you set the width and height of the animation\n    var w = widget.width(),\n      h = widget.height()-20,\n      z = d3.scale.category20c(),\n      i = 0,\n      radius = 60 * widget.width()/widget.height();\n \n    // We create the animation canvas here\n    var svg = d3.select(\".widget[data-id='\"+ widgetId +\"'] .content\")\n      .append(\"svg:svg\")\n      .attr(\"width\", w)\n      .attr(\"height\", h);\n\n    // This function emits a circle, and animates it\n    particle = function (coords) {\n      svg.append(\"svg:circle\")\n        .attr(\"cx\", coords[0])\n        .attr(\"cy\", coords[1])\n        .attr(\"r\", 1e-6)\n        .style(\"stroke\", z(++i))\n        .style(\"stroke-opacity\", 1)\n        .style(\"fill-opacity\", 0)\n        .transition()\n          .duration(2000)\n          .ease(Math.sqrt)\n          .attr(\"r\", radius)\n          .style(\"stroke-opacity\", 1e-6)\n          .remove();\n    }\n  });\n});\n\n// This runs when the widget receives a transmission\nthis.on('transmission', function(data){\n  if (data.coords == undefined) {\n    // We set some random coordinates for the circle,\n    // in the case that no coordinates were passed.\n    data.coords = [\n      Math.floor(Math.random()*widget.width()), \n      Math.floor(Math.random()*widget.height()-20)\n    ]\n  } \n  particle(data.coords);\n});\n"
  json: '{}'
  snapshotUrl: "/images/widgetTemplates/rainDrops.png"